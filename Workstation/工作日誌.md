## 2015-06-12 (FRI)
  - 機型總數量維護作業針對失效版本進行複製，複製內容的有效期限須為9991231(BCRD0011.aspx.cs)

## 2015-06-12 (FRI)
  - TCMS系統( 361027 / 1234 )
	* TCMSBL.vb, <del>主檔中航班資訊，新增B7航班資訊</del>

## 2015-06-11 (THU)
  - TCMS系統( 361027 / 1234 )
	* B2ED011, <del>系統管理人審核申請單時，先提示庫存量及單位，超出庫存量者無法審核，必須修改審核數量</del>

## 2015-06-10 (WED)
  - TCMS系統( 361027 / 1234 )
	* 主檔中航班資訊，新增B7航班資訊 
	* 系統管理人審核申請單時，先提示庫存量及單位，超出庫存量者無法審核，必須修改審核數量
	* B2E3B, <del>運補單產生時，資料依場站別印出</del>
	* INVD060, <del>查詢表單資料時，不需列出已下架版本，僅列出最新版本</del>

  <dataBase id="FIS">
    <DBType>Oracle</DBType>
    <DBServer>FIS.evaair.com</DBServer>
    <DBName>FIS.evaair.com</DBName>
    <ID>AAFS_SMAS</ID>
    <Password>SMAS_FIS0301</Password>
    <ConnectionTimeOut>1</ConnectionTimeOut>
  </dataBase>
  <dataBase id="TCMS">
    <DBType>Oracle</DBType>
    <DBServer>TCMSTEST.evaair.com</DBServer>
    <DBName>TCMS</DBName>
    <ID>TCMSTEST</ID>
    <Password>p35TCMST082</Password>
    <ConnectionTimeOut>1</ConnectionTimeOut>
  </dataBase>
  <dataBase id="TCMS">
    <DBType>Oracle</DBType>
    <DBServer>TCMS.evaair.com</DBServer>
    <DBName>TCMS</DBName>
    <ID>TCMS</ID>
    <Password>p35TCMS03</Password>
    <ConnectionTimeOut>1</ConnectionTimeOut>
  </dataBase>

## 2015-06-09 (TUE)
  - fortify (SMAS.MainWebAP.UNI)
  - 除錯(PSNF020\NIGHTRUN.cs)並未將物件參考設定為物件的執行個體

## 2015-06-08 (MON)
  - fortify (SMAS.MainWebAP.UNI)
  - 除錯(PSNF020\NIGHTRUN.cs)並未將物件參考設定為物件的執行個體
  - PURR020 (C:\Inetpub\wwwroot\TCMS\PUR\Report), <del>採購管理流程中，訂購單版本不正確，需修改成最新版序</del>

## 2015-06-05 (FRI)
  - fortify (SMAS.MainWebAP.UNI)
  - 查詢以下問題發生原因，AUTD0080在執行駁回申請時，更新 H_ONWAY_QTY 有問題
  - 模擬情境 
	* 以 399468 登入 --> INVD0020 --> 新增 --> MANO 到 KHHO --> 4800755 36個，送審,產生H150003579
	* 以 187560 登入 --> AUTD0080 --> 擬准
	* 以 E70465 登入 --> AUTD0080 --> 駁回
Procedure.cs
lineNo: 4312
```
SELECT 
	ROWID, B.* 
FROM 
	INV_EXPIRE_MATERIAL_STOCK B
WHERE 
	STORE_NO='KHHO'
	AND CODE='4800755'
	AND QTY<>0;
```

## 2015-06-04 (THU)
  - fortify

## 2015-06-03 (WED)
  - 設定本機資料夾( C:\inetpub\wwwroot\SMAS.MainWebAP\SMAS.MainWebAP.BAS\TEMP )
	* 建立資料夾 C:\inetpub\wwwroot\SMAS.MainWebAP\SMAS.MainWebAP.BAS\TEMP
	* 給予以下使用者此資料夾的所有權限
	  (1) NETWORK SERVICE
   
 - 設定遠端資料夾( \\Smasap03.evaair.com\smas\Sound\BAS\Material\ )
	* 登入到伺服器 SMASAP03
	* 建立資料夾 C:\SMAS\Sound\BAS\Material (SELECT SERVER_PATH FROM BAS_DATA_INTERFACE WHERE INTERFACE_ID = 'BASD0020_S')
	* 給予以下使用者此資料夾的所有權限
	  (1) 選擇一個DOMAIN USER(e.g. evaair/e10760)，此DOMAIN USER就是登入QASMASAP01的使用者
	  (2) 將給予此使用者資料夾所有權縣 

 - 使用FortifyUtils.PathCombine會出問題
	//string filePath = FortifyUtils.PathCombine(dir, string.Format("{0}{1}", SERIAL_NO, Path.GetExtension(htmlInputFile.PostedFile.FileName)));
	//filePath = "\\" + filePath;
	
	string filePath = Path.Combine(dir, string.Format("{0}{1}", SERIAL_NO, Path.GetExtension(htmlInputFile.PostedFile.FileName)));
	return filePath;

http://blog.miniasp.com/post/2007/11/10/How-to-write-file-to-net-share-folder-using-ASPNET.aspx
http://www.outsystems.com/forums/discussion/5653/how-to-setting-up-applications-access-to-file-systems/
https://msdn.microsoft.com/en-us/library/cc515176%28v=cs.70%29.aspx


## 2015-06-02 (TUE)
  - 修正Fortify Issue
	* APN
	* AUT(尚未解決)
	* B2C(尚未解決)
	* BAS
	* BCR
	* BUD
	* CAT
	* CRW(尚未解決)
	* CTM
	* INV
	* LCS(尚未解決)
	* NSP
	* OUT
	* PSD


## 2015-06-02 (MON)
  - 修正在PURD0040在產製報表INVR0140R, PURR0060R的問題

SELECT 
    ORIGINAL_TRANS_NO,
    (SELECT DISTINCT REQUEST_NO FROM PUR_PURCHASE_DETAILS WHERE PURCHASE_NO=ORIGINAL_TRANS_NO),
    (SELECT VENDOR_NO FROM PUR_PURCHASE_MASTER WHERE PURCHASE_NO=ORIGINAL_TRANS_NO),
    (SELECT VENDOR_NAME_ENGLISH FROM VND_VENDOR WHERE VENDOR_NO = (SELECT VENDOR_NO FROM PUR_PURCHASE_MASTER WHERE PURCHASE_NO=ORIGINAL_TRANS_NO))
FROM
    INV_TRANS_DETAILS
WHERE    
    TRANS_NO='J150000033' 
ORDER BY  ORIGINAL_TRANS_NO  

## 2015-05-29 (FRI)
  - 修正在QASMASWBS04執行Jobs會失敗的問題
  - 建立JobRecorder

INVR0140報表前四項要各自獨立成一行
抓資料的方式還要再問泰尉

流程
PURD0040 -> 20150522 ~ 20150529
SELECT ONE ROW (申請單序號　5006)
PRESS '相關訂購單...'
PRESS '批次列印'

檢視報表
PURR0060R
INVR0140R

INVR0140_1

## 2015-05-28 (THU)
  - 修正在QASMASWBS04執行Jobs會失敗的問題
	* 確保相關資料庫連線參數有設定在 C:\dbconfig.xml
	* 確保相關資料庫連線參數有設定在 tnsname.ora
	* 建立資料夾 "C:\com.ddsc.database"，並給予目前使用者有足夠權限存取此資料夾
  
## 2015-05-27 (WED)
  - BASD0023加入下載功能
  - 轉檔(將 PSN_OPEN_DATA_NEW 從 WP32.evaair.com 寫入 SMASTEST.evaair.com)
	* 工作環境 : QASMASWBS04 (帳號密碼 : E70964/19910103)
	* 請在 QASMASWBS04 另開專案
	* SMASTEST.evaair.com (scs/p35scs2015)
	* WP32.evaair.com (SMAS_LINK/CPU)
	* dbCONFIG:
```
<dataBase id="WP32" EventLog="false" EventLogPath="C:\com.ddsc.database">
	<dbType>ORACLE</dbType> 
	<dbServer>WP32.evaair.com</dbServer> 
	<userID>HordAK8TsYM9lXFV6GIZ+a5qm4HJWnvFUPzKnBhgz/4=</userID> 
	<userPW>EOLTLkpFBsf0TpokzRHOEu0YR6zhTWvsnyqHsb54WtI=</userPW> 
	<connectionTimeOut>100000</connectionTimeOut> 
</dataBase>
```
 
## 2015-05-26 (TUE)
  - 處理 OUTR0030 預覽報表問題  
    請幫忙看看一樣的報表，都是跑AA 料庫，為何數字會不同?? 謝謝!  
	http://localhost/SMASWebAP/OUT/OUTR0030.aspx

 
轉檔來源
WP32.evaair.com  
SMAS_LINK/CPU  
轉檔目的
SMARTTEST.evaair.com

QueryCondition 1
料號 0100001 ~ 4999999 
年月 201404  ~ 201503

料號 1100379 
年月 201404 201503

E70964/19910102

QueryCondition 2
料號 1100379 
年月 201405 201504

## 2015-05-25 (MON)
  - (BASD0023) 解決 Fortify Issue
 
## 2015-05-22 (FRI)

  - 測試帳號:395408
  - TASK01: BASD0021加入兩個欄位(中文特色介紹，英文特色介紹)
  - TASK02: 新增上傳聲音檔(BASD0023)頁面
	* 聲音檔允許上傳檔案類型(WAV,WMV,MP3)
	* 可以線上播放

  CHINESE_SPEC_DESC    VARCHAR2(100 BYTE),
  ENGLISH_SPEC_DESC    VARCHAR2(100 BYTE)

(1)
  <data name="BTNSOUND" xml:space="preserve">
    <value>聲音資料</value>
  </data>  
  <data name="SOUNDPATH" xml:space="preserve">
    <value>聲音檔案路徑</value>
  </data>
  <data name="CHINESE_SPEC_DESC" xml:space="preserve">
    <value>中文特色介紹</value>
  </data>
  <data name="ENGLISH_SPEC_DESC" xml:space="preserve">
    <value>英文特色介紹</value>
  </data>  

(2) 建立資料夾並授予權限
C:\inetpub\wwwroot\SMAS.MainWebAP\SMAS.MainWebAP.BAS\TEMP

(3) 專案參考需增加 NuGet: Sasa

gNewData += txtREMARK.Text.Trim() + "?"; //備註

BAS_MATERIAL_SOUND_SEQUENCE, BAS_MATERIAL_IMAGE_SEQUENCE 一模一樣 拷貝即可
抓取最新版本

## 2015-05-21 (THU)
  - 宣導維護(PSDM0090, PSDM0091) 解決 Fortify Issue 
  - 屬性: 海關庫存差異檢核
  - 

## 2015-05-20 (WED)
  - 偵錯料號(8402225, 8402235, 8402216) 在
  - 時與預期結果不一致的問題 	
  - 屬性: 海關庫存差異檢核
  - 

## 2015-05-19 (TUE)
  - 宣導維護(PSDM0090, PSDM0091)
  - 屬性: 海關庫存差異檢核轉檔

## 2015-05-18 (MON)
  - 宣導維護(PSDM0090, PSDM0091)
  - 屬性: 海關庫存差異檢核轉檔

## 2015-05-15 (THU)
  - 宣導維護(PSDM0090, PSDM0091)
  - 屬性: 海關庫存差異檢核轉檔
  
## 2015-05-14 (THU)
  - 宣導維護(PSDM0090, PSDM0091)
  - 屬性: 海關庫存差異檢核轉檔
  - TABLE: PSD_LED_PPT_ITEM
  - [解決
  - 失敗，拒絕存取路徑](http://name7946123.blogspot.tw/2013/07/blog-post_18.html)  
  - [使用PLUPLOAD進行多檔案上傳(前端)](http://www.plupload.com/docs/)  
  - [使用PLUPLOAD進行多檔案上傳(後端)](http://weblog.west-wind.com/posts/2013/Mar/12/Using-plUpload-to-upload-Files-with-ASPNET)
  - 專案參考需增加 NuGet: Westwind.Utilities, AntiXSS, Sasa
  - 上傳資料夾(TempUploads, Uploads)，針對IIS_IUSEr加入所有權限
  - [sasa source code](http://sourceforge.net/projects/)sasa/
 
## 2015-05-13 (WED)
  - CTMF020.CheckInconsistentStock
	* 工作屬性：海關帳
	* 新增 [庫存量 = 現有量 AND 庫存量 <> 海關庫存量]
	* 新增 [現有量 <> 海關庫存量]
  - CTMF020_TEMP.UpdateInconsistentStock
	* 工作屬性：海關帳
	* SET 海關庫存量 = 庫存量 IF 現有量 = 庫存量一樣 AND 庫存量 <> 海關庫存量

## 2015-05-12 (TUE)
  - 修正INVR0020最新庫存表卻跑不出
	* 頁面  
	  http://localhost/SMASWebAP/INV/INVR0020.aspx
	* 查詢條件
		1. 料庫: 
		2. GENL
		2. 料號1: 6200960 ~ 6200970
	* 對應查詢邏輯    
	  \\C136244\shared\20150512_INVR0020_GENL_6200960_6200970.SQL
	* 結論  
	  無任何問題

  - 忘記哪一功能頁，但以下邏輯有問題
  -   
```
if (string.IsNullOrEmpty(Request["From"].ToString().Trim()) & string.IsNullOrEmpty(Request["To"].ToString().Trim()))  
else if (!string.IsNullOrEmpty(Request["From"].ToString().Trim()) & !string.IsNullOrEmpty(Request["To"].ToString().Trim()))  
```	  



## 2015-05-11 (MON)

  - 修正INVR0020在預覽列印時，發生異常的問題
	* 頁面  
	  http://localhost/SMASWebAP/INV/INVR0020.aspx
	* 查詢條件
		1. 料庫: MANO
		2. 料號1: 4000001 ~ 4999999  
	* 錯誤訊息(英文)  
	  The given DataRow is not in the current DataRowCollection
	* 發生例外問題點  
	  ReportLogic_INV.INVR0020,  ds_P1.Tables[1].Rows.Remove(row); // 清除原本的資料
	* 解決方法  
	  if (!original_rows.Contains(dr)) // 原本只有 'original_rows.Add(dr);'，加上這一行避免重複加入 dr

  - 修正INVR0300，2015/03月的當月進貨金額，沒有資料。
	* 頁面  
	  http://localhost/SMASWebAP/INV/INVR0300.aspx
	* 查詢條件  
	  201503
	* 對應查詢邏輯    
	  \\LOCALHOST\shared\INVR0300_201503.sql
	* 錯誤原因  
	  INV_STOCK_AVG_AMT在201503月份沒有資料
	* 搜尋會塞入INV_STOCK_AVG_AMT資料表的JOB，手動執行對應動作(參數為201503)

## 2015-05-08 (FRI)

  - 新增PSDM0070, PSDM0071

## 2015-05-07 (THU)

  - 新增PSDM0080, PSDM0081
		
## 2015-05-06 (WED)

  - 修正PSDM0021星期欄位，對應儲存到資料庫的欄位格式
  - 航行管制部作業手冊
	* PSDM0070
	* PSDM0071
	* PSDM0080
	* PSDM0081
	
	* task_1 2015-05-05 (TUE) 
	* task_1 2015-04-30 (THU)
	* task_1 2015-04-29 (WED)
	* task_1 2015-04-21 (TUE)

	* task_2 2015-05-04 (MON)
	* task_2 2015-04-22 (WED)
	* task_2 2015-04-20 (MON)
	* task_2 2015-04-17 (FRI)

	* task_3 2015-04-15 (WED)
	* task_3 2015-04-14 (TUE)
	* task_3 2015-04-13 (MON)
	* task_3 2015-04-10 (FRI)

	* task_4 2015-04-28 (TUE)
	* task_4 2015-04-27 (MON)
	* task_4 2015-04-24 (FRI)
	* task_4 2015-04-23 (THU)
	
## 2015-05-05 (TUE)

  - 修正PSDM0021星期欄位，對應儲存到資料庫的欄位格式
  - 航行管制部作業手冊
	* PSDM0070
	* PSDM0071
	* PSDM0080
	* PSDM0081

  
## 2015-05-04 (MON)

  - 修正報表計算問題 
  - 
  
## 2015-04-30 (THU)

  - PURD0023新增以下欄位，並且修改對應UI

```
NEWS_WEEKDAYS  VARCHAR2(256 BYTE)             NOT NULL,  
NEWS_TIME1     VARCHAR2(8 BYTE)               NOT NULL,  
NEWS_TIME2     VARCHAR2(8 BYTE)               NOT NULL,	  								
NEWS_TARGETS   VARCHAR2(256 BYTE)             NOT NULL,  
NEWS_IMGNAME   VARCHAR2(256 BYTE)             NOT NULL,  
NEWS_IMGPATH   VARCHAR2(256 BYTE)             NOT NULL,  
```
 
## 2015-04-29 (WED)

  - 偵錯B2CR0140報表問題, 尋找ReportLogic_B2C.cs中，函式B2CR0140查詢SQL問題
 
## 2015-04-28 (TUE)

  - 轉檔 PSNF010

## 2015-04-27 (MON)

  - 修正PURD0021.aspx，處理儲存按鈕後，訂單在途量的數目不正確的問題
 
## 2015-04-24 (FRI)

  - 修正PURD0021.aspx，處理在執行取消訂單後，訂單在途量的數目不正確的問題

## 2015-04-23 (THU)

  - 修正PURD0021.aspx，處理在執行取消訂單後，訂單在途量的數目不正確的問題
 
## 2015-04-22 (WED)

  - 修正OUTD0051.js，解決領用量的小數點問題(parseInt改成parseFloat)

## 2015-04-21 (TUE)

  - 修正WorkFlowRemark.aspx, 限制REMARK輸入不可大於200個字

## 2015-04-20 (MON)

  - 修正INVR0050.aspx查詢SQL邏輯(INVD0150.Query)
  
## 2015-04-17 (FRI)

  - 修正INVR0050.aspx查詢SQL邏輯(INVD0150.Query)

## 2015-04-16 (THU)

  - 請假看病

## 2015-04-15 (WED)

  - 修正INVR0050.aspx查詢SQL邏輯(INVD0150.Query)

## 2015-04-14 (TUE)

  - 處理轉檔(CTMF020.CheckStock)  
	EMAIL伺服器    
	const string SMTP = "10.3.25.150";  //測試完，要關掉

## 2015-04-13 (MON)

  - 修正fortity偵測到的XSS問題(B2CM0081.aspx.cs, B2CM0081.js)  
	前端：$.param  
	後端：Server.Encode

## 2015-04-10 (FRI)

  - 修正報表(BCRR0040R.rpt)，不能夠分頁的問題